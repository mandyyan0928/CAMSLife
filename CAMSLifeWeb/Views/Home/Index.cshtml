@{
    ViewBag.Title = "Home Page";
}
@model CaliphWeb.Models.ViewModel.IndexViewModel




<script src="~/global_assets/js/plugins/visualization/d3/d3.min.js"></script>
<script src="~/global_assets/js/plugins/visualization/echarts/echarts.min.js"></script>
<script src="~/global_assets/js/demo_pages/components_modals.js"></script>
<script src="~/global_assets/js/demo_charts/pages/dashboard/light/progress.js"></script>
<script src="~/global_assets/js/demo_pages/form_input_groups.js"></script>
<script src="~/global_assets/js/demo_charts/echarts/light/pies/pie_multiple.js"></script>
 
<script>
    var activeDeals = @Html.Raw(Json.Encode(Model.WeeklyActiveDeal));
    var closedDeals = @Html.Raw(Json.Encode(Model.WeeklyClosedDeal));
    var lostDeals= @Html.Raw(Json.Encode(Model.WeeklyLostDeal));
    var weeklyDays = @Html.Raw(Json.Encode(Model.WeeklyDays));

    var EchartsAreaBasicLight = function () {


        //
        // Setup module components
        //

        // Basic area chart
        var _areaBasicLightExample = function () {
            if (typeof echarts == 'undefined') {
                console.warn('Warning - echarts.min.js is not loaded.');
                return;
            }

            // Define element
            var area_basic_element = document.getElementById('area_basic');


            //
            // Charts configuration
            //

            if (area_basic_element) {

                // Initialize chart
                var area_basic = echarts.init(area_basic_element);


                //
                // Chart config
                //

                // Options
                area_basic.setOption({
                    //2ec7c9- closed
                    //f58646- in progress
                    //fce3e3- lost
                    // Define colors
                    color: ['#2ec7c9', '#f58646', '#f0615e'],

                    // Global text styles
                    textStyle: {
                        fontFamily: 'Roboto, Arial, Verdana, sans-serif',
                        fontSize: 13
                    },

                    // Chart animation duration
                    animationDuration: 750,

                    // Setup grid
                    grid: {
                        left: 0,
                        right: 40,
                        top: 35,
                        bottom: 0,
                        containLabel: true
                    },

                    // Add legend
                    legend: {
                        data: ['Active Deals', 'Lost deals', 'Closed deals'],
                        itemHeight: 8,
                        itemGap: 20
                    },

                    // Add tooltip
                    tooltip: {
                        trigger: 'axis',
                        backgroundColor: 'rgba(0,0,0,0.75)',
                        padding: [10, 15],
                        textStyle: {
                            fontSize: 13,
                            fontFamily: 'Roboto, sans-serif'
                        }
                    },

                    // Horizontal axis
                    xAxis: [{
                        type: 'category',
                        boundaryGap: false,
                        data: weeklyDays,
                        axisLabel: {
                            color: '#333'
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#999'
                            }
                        },
                        splitLine: {
                            show: true,
                            lineStyle: {
                                color: '#eee',
                                type: 'dashed'
                            }
                        }
                    }],

                    // Vertical axis
                    yAxis: [{
                        type: 'value',
                        axisLabel: {
                            color: '#333'
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#999'
                            }
                        },
                        splitLine: {
                            lineStyle: {
                                color: '#eee'
                            }
                        },
                        splitArea: {
                            show: true,
                            areaStyle: {
                                color: ['rgba(250,250,250,0.1)', 'rgba(0,0,0,0.01)']
                            }
                        }
                    }],

                    // Add series
                    series: [
                        {
                            name: 'Closed deals',
                            type: 'line',
                            data: closedDeals,
                            areaStyle: {
                                normal: {
                                    opacity: 0.25
                                }
                            },
                            smooth: true,
                            symbolSize: 7,
                            itemStyle: {
                                normal: {
                                    borderWidth: 2
                                }
                            }
                        },
                        {
                            name: 'Active Deals',
                            type: 'line',
                            smooth: true,
                            symbolSize: 7,
                            itemStyle: {
                                normal: {
                                    borderWidth: 2
                                }
                            },
                            areaStyle: {
                                normal: {
                                    opacity: 0.25
                                }
                            },
                            data: activeDeals//[30, 182, 434, 791, 390, 30, 10]
                        },
                        {
                            name: 'Lost deals',
                            type: 'line',
                            smooth: true,
                            symbolSize: 7,
                            itemStyle: {
                                normal: {
                                    borderWidth: 2
                                }
                            },
                            areaStyle: {
                                normal: {
                                    opacity: 0.25
                                }
                            },
                            data: lostDeals
                        }
                    ]
                });
            }


            //
            // Resize charts
            //

            // Resize function
            var triggerChartResize = function () {
                area_basic_element && area_basic.resize();
            };

            // On sidebar width change
            var sidebarToggle = document.querySelectorAll('.sidebar-control');
            if (sidebarToggle) {
                sidebarToggle.forEach(function (togglers) {
                    togglers.addEventListener('click', triggerChartResize);
                });
            }

            // On window resize
            var resizeCharts;
            window.addEventListener('resize', function () {
                clearTimeout(resizeCharts);
                resizeCharts = setTimeout(function () {
                    triggerChartResize();
                }, 200);
            });
        };


        //
        // Return objects assigned to module
        //

        return {
            init: function () {
                _areaBasicLightExample();
            }
        }
    }();


    // Initialize module
    // ------------------------------

    document.addEventListener('DOMContentLoaded', function () {
        EchartsAreaBasicLight.init();
    });

</script>

<div class="row">
    <div class="col-md-8">
        <div class="row">
            <div class="col-lg-4">

                <!-- Members online -->
                <div class="card bg-primary text-secondary">
                    <div class="card-body">
                        <div class="d-flex">
                            <h3 class="font-weight-semibold mb-0">Deal</h3>
                        </div>
                        <div>
                            @Model.TotalDeal Active,    @Model.ClosedDeal Closed
                            <div class="font-size-sm opacity-75">@Model.DealClosingRate.ToString("n0")% </div>
                        </div>
                    </div>

                    <div class="container-fluid">
                        <div id="members-online"><svg width="226.78750610351562" height="50"><g width="226.78750610351562"><rect class="d3-random-bars" width="6.532973426850244" x="2.7998457543643904" height="27.500000000000004" y="22.499999999999996" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="12.132664935579026" height="45" y="5" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="21.46548411679366" height="37.5" y="12.5" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="30.798303298008296" height="37.5" y="12.5" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="40.13112247922293" height="45" y="5" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="49.46394166043756" height="32.5" y="17.5" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="58.7967608416522" height="35" y="15" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="68.12958002286683" height="32.5" y="17.5" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="77.46239920408146" height="32.5" y="17.5" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="86.7952183852961" height="50" y="0" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="96.12803756651073" height="47.5" y="2.5" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="105.46085674772537" height="40" y="10" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="114.79367592894" height="25" y="25" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="124.12649511015464" height="32.5" y="17.5" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="133.45931429136928" height="40" y="10" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="142.7921334725839" height="27.500000000000004" y="22.499999999999996" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="152.12495265379854" height="37.5" y="12.5" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="161.45777183501318" height="47.5" y="2.5" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="170.7905910162278" height="32.5" y="17.5" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="180.12341019744244" height="50" y="0" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="189.45622937865707" height="45" y="5" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="198.78904855987173" height="42.5" y="7.5" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="208.12186774108636" height="27.500000000000004" y="22.499999999999996" style="fill: rgba(255, 255, 255, 0.5);"></rect><rect class="d3-random-bars" width="6.532973426850244" x="217.454686922301" height="47.5" y="2.5" style="fill: rgba(255, 255, 255, 0.5);"></rect></g></svg></div>
                    </div>
                </div>
                <!-- /members online -->

            </div>

            <div class="col-lg-4">

                <!-- Current server load -->
                <div class="card bg-primary text-secondary">
                    <div class="card-body">
                        <div class="d-flex">
                            <h3 class="font-weight-semibold mb-0">Client</h3>

                        </div>

                        <div>
                            @Model.TotalClient Potential,  @Model.ConfirmedClient Confirmed
                            <div class="font-size-sm opacity-75">@Model.ClientConfirmRate.ToString("n0")% </div>
                        </div>
                    </div>

                    <div id="server-load"><svg width="246.78750610351562" height="50"><g transform="translate(0,0)" width="246.78750610351562"><defs><clipPath id="load-clip-server-load"><rect class="load-clip" width="246.78750610351562" height="50"></rect></clipPath></defs><g clip-path="url(#load-clip-server-load)"><path d="M-9.491827157827524,5L-7.90985596485627,6.333333333333332C-6.3278847718850155,7.666666666666665,-3.1639423859425078,10.33333333333333,0,12.111111111111109C3.1639423859425078,13.888888888888886,6.3278847718850155,14.777777777777777,9.491827157827522,18.555555555555554C12.655769543770031,22.333333333333332,15.81971192971254,28.999999999999996,18.98365431565505,28.55555555555555C22.147596701597557,28.111111111111107,25.311539087540062,20.55555555555555,28.475481473482574,20.111111111111107C31.63942385942508,19.666666666666664,34.803366245367584,26.333333333333332,37.9673086313101,27.22222222222222C41.1312510172526,28.11111111111111,44.295193403195114,23.22222222222222,47.45913578913762,21.22222222222222C50.62307817508013,19.22222222222222,53.787020561022636,20.11111111111111,56.95096294696514,21.666666666666668C60.114905332907654,23.22222222222222,63.27884771885016,25.444444444444443,66.44279010479266,24.111111111111107C69.60673249073517,22.777777777777775,72.77067487667767,17.888888888888886,75.93461726262018,18.555555555555554C79.09855964856268,19.22222222222222,82.26250203450519,25.444444444444446,85.42644442044771,25.666666666666668C88.59038680639021,25.888888888888893,91.75432919233273,20.11111111111111,94.91827157827524,17C98.08221396421774,13.888888888888886,101.24615635016025,13.444444444444441,104.41009873610275,15.444444444444443C107.57404112204526,17.444444444444443,110.73798350798778,21.888888888888886,113.90192589393028,23.888888888888886C117.0658682798728,25.888888888888886,120.22981066581531,25.444444444444443,123.3937530517578,22.333333333333332C126.55769543770032,19.22222222222222,129.72163782364282,13.444444444444443,132.88558020958533,14.555555555555555C136.04952259552783,15.666666666666668,139.21346498147034,23.66666666666667,142.37740736741284,26.555555555555557C145.54134975335535,29.444444444444446,148.70529213929785,27.22222222222222,151.86923452524036,27C155.03317691118286,26.777777777777775,158.19711929712537,28.555555555555554,161.3610616830679,24.33333333333333C164.52500406901038,20.11111111111111,167.68894645495288,9.88888888888889,170.85288884089542,9.222222222222221C174.0168312268379,8.555555555555555,177.1807736127804,17.444444444444443,180.34471599872293,18.555555555555557C183.50865838466544,19.666666666666664,186.67260077060797,12.999999999999998,189.83654315655048,11.666666666666666C193.00048554249298,10.333333333333332,196.1644279284355,14.333333333333334,199.328370314378,16.11111111111111C202.4923127003205,17.88888888888889,205.656255086263,17.444444444444443,208.8201974722055,19.666666666666664C211.984139858148,21.88888888888889,215.14808224409052,26.77777777777778,218.31202463003302,29C221.47596701597553,31.222222222222225,224.63990940191806,30.77777777777778,227.80385178786057,26.333333333333332C230.9677941738031,21.88888888888889,234.1317365597456,13.444444444444443,237.29567894568808,14.11111111111111C240.45962133163061,14.777777777777779,243.62356371757312,24.555555555555557,246.78750610351562,28.555555555555554C249.95144848945813,32.55555555555556,253.11539087540064,30.77777777777778,256.27933326134314,26.555555555555554C259.44327564728565,22.333333333333332,262.60721803322815,15.666666666666666,264.1891892261994,12.333333333333332L265.77116041917066,9L265.77116041917066,50L264.1891892261994,49.999999999999986C262.60721803322815,49.99999999999999,259.44327564728565,49.99999999999999,256.27933326134314,49.999999999999986C253.11539087540064,49.99999999999999,249.95144848945813,49.99999999999999,246.7875061035156,49.999999999999986C243.62356371757312,49.99999999999999,240.45962133163061,49.99999999999999,237.29567894568808,49.999999999999986C234.1317365597456,49.99999999999999,230.9677941738031,49.99999999999999,227.80385178786057,49.999999999999986C224.63990940191806,49.99999999999999,221.47596701597553,49.99999999999999,218.31202463003302,49.999999999999986C215.14808224409052,49.99999999999999,211.984139858148,49.99999999999999,208.8201974722055,49.999999999999986C205.656255086263,49.99999999999999,202.4923127003205,49.99999999999999,199.328370314378,49.999999999999986C196.1644279284355,49.99999999999999,193.00048554249298,49.99999999999999,189.8365431565505,49.999999999999986C186.67260077060797,49.99999999999999,183.50865838466544,49.99999999999999,180.34471599872293,49.999999999999986C177.1807736127804,49.99999999999999,174.0168312268379,49.99999999999999,170.85288884089542,49.999999999999986C167.68894645495288,49.99999999999999,164.52500406901038,49.99999999999999,161.3610616830679,49.999999999999986C158.19711929712537,49.99999999999999,155.03317691118286,49.99999999999999,151.8692345252404,49.999999999999986C148.70529213929785,49.99999999999999,145.54134975335535,49.99999999999999,142.37740736741284,49.999999999999986C139.21346498147034,49.99999999999999,136.04952259552783,49.99999999999999,132.88558020958533,49.999999999999986C129.72163782364282,49.99999999999999,126.55769543770032,49.99999999999999,123.3937530517578,49.999999999999986C120.22981066581531,49.99999999999999,117.0658682798728,49.99999999999999,113.90192589393028,49.999999999999986C110.73798350798778,49.99999999999999,107.57404112204526,49.99999999999999,104.41009873610275,49.999999999999986C101.24615635016025,49.99999999999999,98.08221396421774,49.99999999999999,94.91827157827525,49.999999999999986C91.75432919233273,49.99999999999999,88.59038680639021,49.99999999999999,85.42644442044771,49.999999999999986C82.26250203450519,49.99999999999999,79.09855964856268,49.99999999999999,75.9346172626202,49.999999999999986C72.77067487667767,49.99999999999999,69.60673249073517,49.99999999999999,66.44279010479266,49.999999999999986C63.27884771885016,49.99999999999999,60.114905332907654,49.99999999999999,56.95096294696514,49.999999999999986C53.787020561022636,49.99999999999999,50.62307817508013,49.99999999999999,47.459135789137626,49.999999999999986C44.295193403195114,49.99999999999999,41.1312510172526,49.99999999999999,37.9673086313101,49.999999999999986C34.803366245367584,49.99999999999999,31.63942385942508,49.99999999999999,28.47548147348257,49.999999999999986C25.311539087540062,49.99999999999999,22.147596701597557,49.99999999999999,18.983654315655045,49.999999999999986C15.81971192971254,49.99999999999999,12.655769543770031,49.99999999999999,9.491827157827522,49.999999999999986C6.3278847718850155,49.99999999999999,3.1639423859425078,49.99999999999999,0,49.999999999999986C-3.1639423859425078,49.99999999999999,-6.3278847718850155,49.99999999999999,-7.90985596485627,49.999999999999986L-9.491827157827524,50Z" class="d3-area" style="fill: rgba(255, 255, 255, 0.5); opacity: 1;" transform="translate(-9.491827011108398,0)"></path></g></g></svg></div>
                </div>
                <!-- /current server load -->

            </div>

            <div class="col-lg-4">

                <!-- Today's revenue -->
                <div class="card bg-primary text-secondary">
                    <div class="card-body">
                        <div class="d-flex">
                            <h3 class="font-weight-semibold mb-0">Activity</h3>

                        </div>

                        <div>
                            @Model.UpcomingActivity Upcoming
                            <div class="font-size-sm opacity-75"><br /> </div>
                        </div>
                    </div>

                    <div id="today-revenue"><svg width="246.78750610351562" height="50"><g transform="translate(0,0)" width="246.78750610351562"><defs><clipPath id="clip-line-small"><rect class="clip" width="246.78750610351562" height="50"></rect></clipPath></defs><path d="M20,8.46153846153846L54.46458435058594,25.76923076923077L88.92916870117188,5L123.39375305175781,15.384615384615383L157.85833740234372,5L192.32292175292972,36.15384615384615L226.78750610351562,8.46153846153846" clip-path="url(#clip-line-small)" class="d3-line d3-line-medium" style="stroke: rgb(255, 255, 255);"></path><g><line class="d3-line-guides" x1="20" y1="50" x2="20" y2="8.46153846153846" style="stroke: rgba(255, 255, 255, 0.3); stroke-dasharray: 4, 2; shape-rendering: crispedges;"></line><line class="d3-line-guides" x1="54.46458435058594" y1="50" x2="54.46458435058594" y2="25.76923076923077" style="stroke: rgba(255, 255, 255, 0.3); stroke-dasharray: 4, 2; shape-rendering: crispedges;"></line><line class="d3-line-guides" x1="88.92916870117188" y1="50" x2="88.92916870117188" y2="5" style="stroke: rgba(255, 255, 255, 0.3); stroke-dasharray: 4, 2; shape-rendering: crispedges;"></line><line class="d3-line-guides" x1="123.39375305175781" y1="50" x2="123.39375305175781" y2="15.384615384615383" style="stroke: rgba(255, 255, 255, 0.3); stroke-dasharray: 4, 2; shape-rendering: crispedges;"></line><line class="d3-line-guides" x1="157.85833740234372" y1="50" x2="157.85833740234372" y2="5" style="stroke: rgba(255, 255, 255, 0.3); stroke-dasharray: 4, 2; shape-rendering: crispedges;"></line><line class="d3-line-guides" x1="192.32292175292972" y1="50" x2="192.32292175292972" y2="36.15384615384615" style="stroke: rgba(255, 255, 255, 0.3); stroke-dasharray: 4, 2; shape-rendering: crispedges;"></line><line class="d3-line-guides" x1="226.78750610351562" y1="50" x2="226.78750610351562" y2="8.46153846153846" style="stroke: rgba(255, 255, 255, 0.3); stroke-dasharray: 4, 2; shape-rendering: crispedges;"></line></g><g><circle class="d3-line-circle d3-line-circle-medium" cx="20" cy="8.46153846153846" r="3" style="stroke: rgb(255, 255, 255); fill: rgb(255, 255, 255); opacity: 1;"></circle><circle class="d3-line-circle d3-line-circle-medium" cx="54.46458435058594" cy="25.76923076923077" r="3" style="stroke: rgb(255, 255, 255); fill: rgb(255, 255, 255); opacity: 1;"></circle><circle class="d3-line-circle d3-line-circle-medium" cx="88.92916870117188" cy="5" r="3" style="stroke: rgb(255, 255, 255); fill: rgb(255, 255, 255); opacity: 1;"></circle><circle class="d3-line-circle d3-line-circle-medium" cx="123.39375305175781" cy="15.384615384615383" r="3" style="stroke: rgb(255, 255, 255); fill: rgb(255, 255, 255); opacity: 1;"></circle><circle class="d3-line-circle d3-line-circle-medium" cx="157.85833740234372" cy="5" r="3" style="stroke: rgb(255, 255, 255); fill: rgb(255, 255, 255); opacity: 1;"></circle><circle class="d3-line-circle d3-line-circle-medium" cx="192.32292175292972" cy="36.15384615384615" r="3" style="stroke: rgb(255, 255, 255); fill: rgb(255, 255, 255); opacity: 1;"></circle><circle class="d3-line-circle d3-line-circle-medium" cx="226.78750610351562" cy="8.46153846153846" r="3" style="stroke: rgb(255, 255, 255); fill: rgb(255, 255, 255); opacity: 1;"></circle></g></g></svg></div>
                </div>
                <!-- /today's revenue -->

            </div>
        </div>
        @{ var user = CaliphWeb.Helper.UserHelper.GetLoginUserViewModel(); }
        @*@if (user.IsLeader || user.IsAgent)
        {
    <div class="row">
        <div class="col-md-12" id="bonus-tracker">
            <div class="card">
               
                @Html.Partial("~/Views/Home/_BonusTrackerDashboard.cshtml", new CaliphWeb.Models.ViewModel.BonusTrackerDashboard())
            </div>
        </div>

    </div>
        }
        else if (user.IsPotentialAgent)
        {
            <div class="row">

                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header header-elements-sm-inline">
                            <h6 class="card-title">Q4 Contest Countdown</h6>

                        </div>
                        <div class="card-body d-sm-flex align-items-sm-center justify-content-sm-between flex-sm-wrap">
                            <div class="flipTimer">
                                <div class="days"></div>
                                <div class="hours"></div>
                                <div class="minutes"></div>
                                <div class="seconds"></div>
                            </div>
                            <div class="col-sm-6"> 
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }*@
        <div class="row">
            <div class="col-xl-12 col-md-12">
                <!-- Basic area -->
                <div class="card  h-100">
                    <div class="card-header">
                        <h5 class="card-title">Weekly Deal</h5>
                    </div>

                    <div class="card-body">
                        <div class="chart-container">
                            <div class="chart has-fixed-height" id="area_basic"></div>
                        </div>
                    </div>
                </div>
                <!-- /basic area -->
            </div>
        </div>

    </div>

    <div class="col-xl-4 col-md-12">
        <div class="card">
            <!-- Tabs -->
            <ul class="nav nav-tabs nav-tabs-solid nav-tabs-solid-custom bg-primary rounded justify-content-center nav-justified">
                <li class="nav-item">
                    <a href="#ace-p" class="nav-link active text-secondary" data-toggle="tab">
                        Personal
                    </a>
                </li>

                <li class="nav-item">
                    <a href="#ace-w" class="nav-link text-secondary" data-toggle="tab">
                        Group
                    </a>
                </li>
               
            </ul>
            <!-- /tabs -->
            <!-- Tabs content -->
            <div class="tab-content card-body tab-content card-body p-0 mt-2">
                <h4 class="text-center">AFYC</h4>
                <div class="tab-pane active fade show" id="ace-p">
                    <!-- Numbers -->
                    <div class="card-body py-0">
                        <div class="row text-center">
                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="ace-p-ytd"></span>
                                    </h5>
                                    <span class="text-muted font-size-sm">YTD</span>
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="ace-p-mtd"></span>
                                    </h5>
                                    <span class="text-muted font-size-sm">MTD</span>
                                </div>
                            </div>


                        </div>
                    </div>
                    <!-- /numbers -->
                </div>

                <div class="tab-pane fade" id="ace-u">
                    <!-- Numbers -->
                    <div class="card-body py-0">
                        <div class="row text-center">
                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="ace-u-ytd"></span>
                                    </h5>
                                    <span class="text-muted font-size-sm">YTD</span>
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="ace-u-mtd"></span>
                                    </h5>
                                    <span class="text-muted font-size-sm">MTD</span>
                                </div>
                            </div>


                        </div>
                    </div>
                    <!-- /numbers -->

                </div>
                <div class="tab-pane fade" id="ace-g1">
                    <!-- Numbers -->
                    <div class="card-body py-0">
                        <div class="row text-center">
                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="ace-g1-ytd"></span>
                                    </h5>
                                    <span class="text-muted font-size-sm">YTD</span>
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="ace-g1-mtd"></span>
                                    </h5>
                                    <span class="text-muted font-size-sm">MTD</span>
                                </div>
                            </div>


                        </div>
                    </div>
                    <!-- /numbers -->
                </div>

                <div class="tab-pane fade" id="ace-g2">
                    <!-- Numbers -->
                    <div class="card-body py-0">
                        <div class="row text-center">
                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="ace-g2-ytd"></span>
                                    </h5>
                                    <span class="text-muted font-size-sm">YTD</span>
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="ace-g2-mtd"></span>
                                    </h5>
                                    <span class="text-muted font-size-sm">MTD</span>
                                </div>
                            </div>


                        </div>
                    </div>
                    <!-- /numbers -->
                </div>

                <div class="tab-pane fade" id="ace-g3">
                    <!-- Numbers -->
                    <div class="card-body py-0">
                        <div class="row text-center">
                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="ace-g3-ytd"></span>
                                    </h5>
                                    <span class="text-muted font-size-sm">YTD</span>
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="ace-g3-mtd"></span>
                                    </h5>
                                    <span class="text-muted font-size-sm">MTD</span>
                                </div>
                            </div>


                        </div>
                    </div>
                    <!-- /numbers -->
                </div>

                <div class="tab-pane fade" id="ace-g4">
                    <!-- Numbers -->
                    <div class="card-body py-0">
                        <div class="row text-center">
                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="ace-g4-ytd"></span>
                                    </h5>
                                    <span class="text-muted font-size-sm">YTD</span>
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="ace-g4-mtd"></span>
                                    </h5>
                                    <span class="text-muted font-size-sm">MTD</span>
                                </div>
                            </div>


                        </div>
                    </div>
                    <!-- /numbers -->
                </div>

            </div>
            <!-- /tabs content -->

        </div>

        <div class="card">
            <!-- Tabs -->
            <ul class="nav nav-tabs nav-tabs-solid nav-tabs-solid-custom bg-primary rounded justify-content-center nav-justified">
                <li class="nav-item">
                    <a href="#persistency-p" class="nav-link active text-secondary" data-toggle="tab">
                        Personal
                    </a>
                </li>

                @if (user.IsLeader)
                {
                    <li class="nav-item">
                        <a href="#persistency-g" class="nav-link text-secondary" data-toggle="tab">
                            Group
                        </a>
                    </li>
                }
            </ul>
            <!-- /tabs -->
            <!-- Tabs content -->
            <div class="tab-content card-body tab-content card-body p-0 mt-2">
                <h4 class="text-center">Persistency</h4>
                <div class="tab-pane active fade show" id="persistency-p">
                    <!-- Numbers -->
                    <div class="card-body py-0">
                        <div class="row text-center">
                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="persistency-p-d0"></span>

                                    </h5>
                                    <span class="text-muted font-size-sm">D0</span><br />
                                    <span class="badge badge-success-100 text-success" id="persistency-date-d0"></span>

                                </div>
                            </div>

                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="persistency-p-d1"></span>


                                    </h5>
                                    <span class="text-muted font-size-sm">D1</span><br />
                                    <span class="badge badge-success-100 text-success" id="persistency-date-d1"></span>
                                </div>
                            </div>
                        </div>
                    </div>



                </div>

                <div class="tab-pane fade" id="persistency-g">
                    <div class="card-body py-0">
                        <div class="row text-center">
                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="persistency-g-d0"></span>
                                    </h5>
                                    <span class="text-muted font-size-sm">D0</span><br />
                                    <span class="badge badge-info-100 text-info" id="persistency-g-date-d0"></span>
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="mb-3">
                                    <h5 class="font-weight-semibold mb-0">
                                        <span id="persistency-g-d1"></span>
                                    </h5>
                                    <span class="text-muted font-size-sm">D1</span><br />
                                    <span class="badge badge-info-100 text-info" id="persistency-g-date-d1"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /numbers -->
                </div>

            </div>
            <!-- /tabs content -->

        </div>


        <div class="card text-center">
            <div class="card-header header-elements-sm-inline">
                <h6 class="card-title text-center w-100">
                    <a href="#" class="btn bg-transparent border-secondary text-secondary rounded-pill border-2 btn-icon">
                        <i class="icon-trophy3"></i>
                    </a>
                </h6>

            </div>
            <div class="card-body pb-0">

                <h5 class="font-weight-semibold mb-0">
                    <span id="cpd-point"></span>
                </h5>
                <p> CPD  points earned</p>
            </div>
        </div>


        <div class="card">
            <div class="card-header">
                <h6 class="card-title">Latest Annoucement</h6>
            </div>

            <div class="card-body pb-0">
                <div class="row">

                    @if (Model.Announcements.Count == 0)
                    {
                        <div class="col-xl-12">
                            <div class="media flex-column flex-sm-row mt-0 mb-3">
                                <div class="media-body">

                                    <ul class="list-inline list-inline-dotted text-muted mb-2">
                                        <li class="list-inline-item"><i class="icon-alarm"></i> No latest announcement</li>
                                    </ul>


                                </div>
                            </div>

                        </div>
                    }
                    @foreach (var announcement in Model.Announcements.OrderByDescending(x => x.CreatedDate))
                    {
                        <div class="col-xl-12">
                            <div class="media flex-column flex-sm-row mt-0 mb-3" style="cursor:pointer  " onclick="ShowAnnouncement(@announcement.AnnouncementId)">
                                <div class="media-body">
                                    <h6 class="media-title">@announcement.Title</h6>
                                    <ul class="list-inline list-inline-dotted text-muted mb-2">
                                        <li class="list-inline-item"><i class="icon-alarm"></i> @announcement.CreatedDate.ToString("dd/MM/yyyy")</li>
                                    </ul>

                                </div>
                            </div>

                        </div>
                    }


                </div>
            </div>
        </div>

    </div>
</div>



<div class="row">



    <div class="col-lg-4">
        @*<div class="card card-body">
                <div class="text-center">
                    <h6 class="mb-0 font-weight-semibold">Commission Target</h6>
                    <p class="mb-3 text-muted"> 85,000/100,000</p>
                </div>

                <div class="progress">
                    <div class="progress-bar bg-primary" style="width: 85%">
                        <span>85% Complete</span>
                    </div>
                </div>
            </div>*@

        <!-- Agent Commission -->
        @*<div class="card card-body">
                <div class="text-center">
                    <h6 class="mb-0 font-weight-semibold">Agent Commission</h6>
                    <p class="mb-3 text-muted">@Model.TotalCommissionAmt</p>
                </div>
            </div>*@
        <!-- Latest posts -->
        <!-- /latest posts -->
    </div>
</div>




<!-- Scrollable modal -->
<div id="modal_scrollable" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable modal-xl">
        <div class="modal-content">
            <div class="modal-header pb-3">
                <h5 class="modal-title" id="modal-title">Scrollable modal</h5>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <div class="modal-body py-0" id="modal-body">
            </div>

            <div class="modal-footer pt-3">
                <button type="button" class="btn btn-link" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<!-- /scrollable modal -->



@section Scripts{
    <script type="text/javascript">

    

        function ShowAnnouncement(id) {
              var announcement = {};

            $.ajax({
                url: '@Url.Action("Get", "Announcement")',
                type: 'POST',
                data: {id:id},
                    success: function (response) {
                        console.log(response);
                        announcement = response.Announcement;
                        $('#modal-title').text(announcement.Title);
                        $('#modal-body').html(announcement.Remarks);
                        $('#modal_scrollable').modal('show');
                    }
            });

    }

                $(document).ready(function () {
                   // InitCountdownTimer();
                    LoadACE('p');
                    LoadACE('w');
                   
                    LoadPersistency('d0');
                    LoadPersistency('d1');
                    LoadCPDPoint();
                  //  LoadBonusTracker();
                });

                //function InitCountdownTimer()
                //{

                //    $('.flipTimer').flipTimer({

                //        // count up or countdown
                //        direction: 'down',

                //        // the target <a href="https://www.jqueryscript.net/time-clock/">date</a>
                //        date: 'January 01, 2023 00:00:00',

                //        // callback works only with direction = "down"
                //        callback: function () { alert('times up!'); }

                //    });
                //}
                function ReplaceNumberWithCommas(yourNumber) {
                    if (yourNumber === null) {
                        return "0.00";
                    }
                    //Seperates the components of the number
                    var n = yourNumber.toString().split(".");
                    //Comma-fies the first part
                    n[0] = n[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                    //Combines the two sections
                    return n.join(".");
                }

                function LoadPersistency(type) {
                    BlockUIHelper.blockUI('persistency-p-' + type);
                    BlockUIHelper.blockUI('persistency-g-' + type);
                    $.ajax({
                        url: '@Url.Action("GetPersistency", "Home")',
                        type: 'POST',
                        data: { type: type },
                        success: function (response) {
                            console.log(response);
                            $('#persistency-p-'+type).html(response.PersonalRatio.toFixed(2)+'%');
                            $('#persistency-g-' + type).html(response.GroupRatio.toFixed(2) + '%');
                            $('#persistency-date-' + type).html(response.PersistencyDateDisplay);
                            $('#persistency-g-date-' + type).html(response.PersistencyDateDisplay);
                            BlockUIHelper.unblockUI('persistency-p-' + type);
                            BlockUIHelper.unblockUI('persistency-g-' + type);
                        },
                        error: function (response) {
                            BlockUIHelper.unblockUI('persistency-p-' + type);
                            BlockUIHelper.unblockUI('persistency-g-' + type);
                        }
                    });


                }

                   function LoadACE(type) {
                    BlockUIHelper.blockUI('ace-' + type);
                    $.ajax({
                        url: '@Url.Action("GetACE", "Home")',
                        type: 'POST',
                        data: { type: type },
                        success: function (response) {
                          
                            $('#ace-' + type + '-mtd').html(ReplaceNumberWithCommas(response.ace_mtd));
                            $('#ace-' + type + '-ytd').html(ReplaceNumberWithCommas(response.ace_ytd));
                            BlockUIHelper.unblockUI('ace-' + type);
                        },
                        error: function (response) {
                            $('#ace-' + type + '-mtd').html('0.00');
                            $('#ace-' + type + '-ytd').html('0.00');
                            BlockUIHelper.unblockUI('ace-' + type);
                        }
                    });

                }



                   function LoadCPDPoint() {
                       BlockUIHelper.blockUI('cpd-point');
                    $.ajax({
                        url: '@Url.Action("GetCPDPoint", "Home")',
                        type: 'POST',

                        success: function (response) {

                            $('#cpd-point').html(ReplaceNumberWithCommas(response));
                            BlockUIHelper.unblockUI('cpd-point' );
                        },
                        error: function (response) {
                            BlockUIHelper.unblockUI('cpd-point');
                        }
                    });

                }



                function GetAnnouncement(id) {
                    var announcement = {};

                    $.ajax({
                        url: '@Url.Action("Get", "Announcement")',
                        type: 'POST',
                        data: { id: id },
                        success: function (response) {
                            console.log(response);
                            announcement = response.Announcement;
                        }
                    });

                    return announcement;
        }


        function LoadBonusTracker() {
            BlockUIHelper.blockUI('bonus-tracker');
            $.ajax({
                url: '@Url.Action("GetBonusTracker", "Home")',
                type: 'POST',
                success: function (response) {
                    console.log(response);
                    $('#bonus-tracker').html(response);
                    var percent= $('#overall-bonus-progress').val();
                    InitBonusChart(percent);
                    BlockUIHelper.unblockUI('bonus-tracker')
                },
                error: function (response) {
                    console.error(response);
                },
                complete: function (response) {
                }
            });
        }


        function InitBonusChart(percent) {
            var pie_multiples_element = document.getElementById('pie_next_potential_bonus');
            var pie_multiples = echarts.init(pie_multiples_element);
            var color ="#E6771E"
            if (percent >= 100)
                color = "#25b372";

            var labelTop = {
                show: true,
                position: 'center',
                formatter: '{b}',
                fontSize: 15,
                rich: {
                    a: {}
                }
            };
            var labelBottom = {
                color: '#333',
                show: false,
                position: 'center',
                formatter: function (params) {
                    return '\n\n' + (100 - params.value) + '%'
                },
                fontWeight: 500,
                rich: {
                    a: {}
                },
                emphasis: {
                    color: '#333'
                }
            };

            option = {
                color: ['#FE8F17'],
                title: {
                    text: 'Overall Progress',
                    left: 'center',
                    textStyle: {
                        fontSize: 17,
                        fontWeight: 500
                    },
                    subtextStyle: {
                        fontSize: 12
                    }
                },
                series: [
                    {

                        type: 'pie',
                        radius: ['50%', '70%'],
                        avoidLabelOverlap: true,

                        label: {
                            show: false,

                        },

                        labelLine: {
                            show: false
                        },
                        data: [
                            
                            { value: percent, name: percent + '%', label: labelTop, itemStyle: { color:color} },
                            {
                                value: 100-percent, name: '', itemStyle: {
                                    color: '#eee',
                                    emphasis: {
                                        color: '#eee'
                                    }
                                }, label: labelBottom
                            },

                        ]
                    }
                ]
            };

            pie_multiples.setOption(option);

        }
    </script>
}
